<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GDPR Q&A Platform</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=DM+Serif+Text&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <div class="header-top">
        <h1 class="logo">GDPR Q&A Platform</h1>
        <p class="tagline">General Data Protection Regulation (EU) 2016/679</p>
      </div>
      <div class="meta-row">
        <span id="lastRefreshed" class="last-refreshed">Loading‚Ä¶</span>
        <button type="button" id="btnRefresh" class="btn btn-primary" title="Fetch the latest Regulation (EU) 2016/679 text from EUR-Lex">
          <span class="btn-icon" aria-hidden="true">‚Üª</span> Refresh sources
        </button>
      </div>
    </div>
  </header>

  <nav class="tabs" role="tablist">
    <button type="button" class="tab active" data-view="browse" role="tab" aria-selected="true">Browse regulation</button>
    <button type="button" class="tab" data-view="ask" role="tab" aria-selected="false">Ask a question</button>
    <button type="button" class="tab" data-view="sources" role="tab" aria-selected="false">Credible sources</button>
    <button type="button" class="tab" data-view="news" role="tab" aria-selected="false">News</button>
  </nav>

  <main class="main">
    <section id="viewBrowse" class="view active" role="tabpanel">
      <div class="browse-layout">
        <aside class="sidebar" id="sidebar">
          <div class="sidebar-inner">
            <h2 class="sidebar-title">Regulation &amp; sources</h2>
            <nav class="nav-sections">
              <div class="nav-section">
                <a href="#" class="nav-link" data-open="recitals">
                  <span class="nav-link-icon">R</span>
                  <span class="nav-link-text">Recitals</span>
                  <span class="nav-link-meta">1‚Äì173</span>
                </a>
                <p class="nav-desc">Preamble and context (EUR-Lex, GDPR-Info)</p>
              </div>
              <div class="nav-section">
                <a href="#" class="nav-link" data-open="chapters">
                  <span class="nav-link-icon">C</span>
                  <span class="nav-link-text">Chapters &amp; Articles</span>
                  <span class="nav-link-meta">1‚Äì99</span>
                </a>
                <p class="nav-desc">11 chapters, binding provisions (EUR-Lex, GDPR-Info)</p>
              </div>
              <div class="nav-section">
                <a href="#" class="nav-link" data-open="sources">
                  <span class="nav-link-icon">S</span>
                  <span class="nav-link-text">Credible sources</span>
                  <span class="nav-link-meta">All</span>
                </a>
                <p class="nav-desc">EDPB, Commission, ICO, GDPR.eu, Council of Europe</p>
              </div>
            </nav>
            <div id="chapterList" class="chapter-list"></div>
          </div>
        </aside>
        <div class="content-panel">
          <div class="detail-actions">
            <button type="button" id="btnBack" class="btn-back hidden" aria-label="Back">‚Üê Back</button>
            <button type="button" id="btnBackToQuestion" class="btn-back btn-back-to-question hidden" aria-label="Back to question">Back to question</button>
            <button type="button" id="btnExportPdf" class="btn btn-export hidden" aria-label="Export as PDF">Export PDF</button>
          </div>
          <div id="browsePlaceholder" class="placeholder">
            <div class="placeholder-content">
              <div class="placeholder-icon">üìã</div>
              <p>Choose <strong>Recitals</strong> or <strong>Chapters &amp; Articles</strong> for the regulation text, or <strong>Credible sources</strong> for guidelines and documents from EDPB, European Commission, ICO, GDPR.eu, and Council of Europe.</p>
              <p class="placeholder-hint">Regulation text is loaded from <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:32016R0679" target="_blank" rel="noopener">EUR-Lex</a>. Use <strong>Refresh sources</strong> in the header to fetch the latest.</p>
            </div>
          </div>
          <div id="browseRecitals" class="browse-section hidden">
            <div class="section-header">
              <h2>Recitals</h2>
              <p class="source-links">Official sources: <a href="https://gdpr-info.eu/recitals/" target="_blank" rel="noopener">GDPR-Info</a> ¬∑ <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:32016R0679" target="_blank" rel="noopener">EUR-Lex</a></p>
            </div>
            <div id="recitalsList" class="doc-grid" role="list"></div>
          </div>
          <div id="browseChapters" class="browse-section hidden">
            <div class="section-header">
              <h2>Chapters &amp; Articles</h2>
              <p class="source-links">Official sources: <a href="https://gdpr-info.eu/" target="_blank" rel="noopener">GDPR-Info</a> ¬∑ <a href="https://eur-lex.europa.eu/eli/reg/2016/679/oj/eng" target="_blank" rel="noopener">EUR-Lex</a></p>
            </div>
            <div class="filter-bar chapters-filters" role="group" aria-label="Filter documents by category, chapter, and article">
              <div class="filter-field">
                <label for="chaptersFilterCategory" class="filter-field-label">Category</label>
                <select id="chaptersFilterCategory" class="filter-field-select" aria-label="Filter by topic category">
                  <option value="">All categories</option>
                </select>
              </div>
              <div class="filter-field">
                <label for="chaptersFilterSubcategory" class="filter-field-label">Sub-category</label>
                <select id="chaptersFilterSubcategory" class="filter-field-select" aria-label="Filter by topic sub-category">
                  <option value="">All sub-categories</option>
                </select>
              </div>
              <div class="filter-field">
                <label for="chaptersFilterChapter" class="filter-field-label">Chapter</label>
                <select id="chaptersFilterChapter" class="filter-field-select" aria-label="Filter by chapter">
                  <option value="">All chapters</option>
                </select>
              </div>
              <div class="filter-field">
                <label for="chaptersFilterArticle" class="filter-field-label">Article</label>
                <select id="chaptersFilterArticle" class="filter-field-select" aria-label="Filter by article">
                  <option value="">All articles</option>
                </select>
              </div>
              <div class="filter-actions">
                <button type="button" id="chaptersFilterClear" class="btn btn-secondary btn-sm filter-clear-btn">Clear filters</button>
              </div>
            </div>
            <div id="chaptersArticlesGrouped" class="chapters-articles-grouped" role="region" aria-label="Articles by chapter"></div>
          </div>
          <div id="browseSources" class="browse-section browse-sources-section hidden">
            <div class="section-header">
              <h2>Credible sources &amp; documents</h2>
              <p class="source-links">Guidelines, guidance, and official documents from all credible sources. Links open in a new tab.</p>
            </div>
            <div id="browseSourcesList" class="sources-grid browse-sources-grid" role="list"></div>
          </div>
          <div id="browseDetail" class="browse-section detail-view hidden">
            <nav id="docNav" class="doc-nav hidden" aria-label="Navigate to previous or next document">
              <button type="button" id="docNavPrev" class="btn btn-secondary btn-doc-nav" aria-label="Previous document">‚Üê Previous</button>
              <span id="docNavLabel" class="doc-nav-label" aria-live="polite"></span>
              <div class="doc-nav-goto">
                <label for="docNavNumber" class="doc-nav-goto-label">Go to</label>
                <input type="number" id="docNavNumber" class="doc-nav-input" min="1" max="99" placeholder="No." aria-label="Document number">
                <button type="button" id="docNavGo" class="btn btn-secondary btn-doc-nav btn-doc-nav-go">Go</button>
              </div>
              <button type="button" id="docNavNext" class="btn btn-secondary btn-doc-nav" aria-label="Next document">Next ‚Üí</button>
            </nav>
            <article id="detailContent" class="doc-content"></article>
            <aside class="citations">
              <h3>Citations &amp; official links</h3>
              <ul id="citationLinks" class="citation-links"></ul>
            </aside>
          </div>
        </div>
      </div>
    </section>

    <section id="viewAsk" class="view" role="tabpanel" hidden>
      <div class="ask-layout">
        <div class="ask-box">
          <label for="query">Ask anything about GDPR</label>
          <div class="query-row">
            <input type="text" id="query" placeholder="e.g. What is personal data? When is consent valid? Right to erasure..." autocomplete="off" aria-label="Search question">
            <button type="button" id="btnAsk" class="btn btn-primary">Search</button>
          </div>
          <p class="hint">Results use the official Regulation (EU) 2016/679 text from <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX:32016R0679" target="_blank" rel="noopener">EUR-Lex</a>. Click <strong>Refresh sources</strong> in the header to load the latest consolidated text.</p>
        </div>
        <div id="askResults" class="ask-results hidden">
          <div class="ask-results-grid">
            <div class="ask-results-left">
              <div id="overallSummary" class="overall-summary-box hidden"></div>
              <div id="resultsList" class="results-list" role="list"></div>
            </div>
            <aside class="ask-summary-panel" id="askSummaryPanel" aria-label="Summary in plain language">
              <div id="askSummaryBox" class="summary-in-plain-language hidden">
                <h3 class="summary-in-plain-language-title">Summary</h3>
                <p class="summary-in-plain-language-hint">A concise overview based on the regulation text.</p>
                <div id="askSummaryContent" class="summary-in-plain-language-content"></div>
              </div>
              <div id="askRelevantDocs" class="ask-relevant-docs hidden" aria-label="Relevant articles and documents">
                <h3 class="ask-relevant-docs-title">Relevant articles &amp; documents</h3>
                <p class="ask-relevant-docs-hint">Open in the app or on the official websites.</p>
                <ul id="askRelevantDocsList" class="ask-relevant-docs-list" role="list"></ul>
              </div>
            </aside>
          </div>
        </div>
      </div>
    </section>

    <section id="viewSources" class="view" role="tabpanel" hidden>
      <div class="sources-layout">
        <div class="sources-header">
          <h2>Credible sources &amp; documents</h2>
          <p class="sources-intro">Open documents and guidance from these organizations. Links open in a new tab.</p>
        </div>
        <div id="sourcesList" class="sources-grid" role="list"></div>
      </div>
    </section>

    <section id="viewNews" class="view" role="tabpanel" hidden>
      <div class="news-layout">
        <div class="news-header">
          <h2>GDPR &amp; data protection news</h2>
          <p class="news-intro">News from credible sources (EDPB, ICO, European Commission, Council of Europe). Each item links to the original article.</p>
          <button type="button" id="btnRefreshNews" class="btn btn-secondary btn-refresh-news">‚Üª Refresh news</button>
        </div>
        <div class="news-feeds-row">
          <h3>News from sources</h3>
          <ul id="newsFeedsList" class="news-feeds-list" role="list"></ul>
        </div>
        <div class="news-list-wrap" id="newsListWrap">
          <h3>News by source and topic</h3>
          <p class="news-list-intro">Below, news is grouped by credible source. Each section has a short summary in plain language and links to the original articles.</p>
          <div class="filter-bar news-filters" role="group" aria-label="Filter news">
            <div class="filter-field">
              <label for="newsFilterSource" class="filter-field-label">Source</label>
              <select id="newsFilterSource" class="filter-field-select" aria-label="Filter by source">
                <option value="">All sources</option>
              </select>
            </div>
            <div class="filter-field">
              <label for="newsFilterTopic" class="filter-field-label">Topic</label>
              <select id="newsFilterTopic" class="filter-field-select" aria-label="Filter by topic">
                <option value="">All topics</option>
              </select>
            </div>
            <div class="filter-actions">
              <button type="button" id="newsFilterClear" class="btn btn-secondary btn-sm filter-clear-btn">Clear filters</button>
            </div>
          </div>
          <div id="newsSections" class="news-sections" role="region" aria-label="News by source"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p><strong>Primary sources (regulation text):</strong> <a href="https://gdpr-info.eu/" target="_blank" rel="noopener">GDPR-Info</a> ¬∑ <a href="https://eur-lex.europa.eu/eli/reg/2016/679/oj/eng" target="_blank" rel="noopener">EUR-Lex (Regulation (EU) 2016/679)</a></p>
    <p><strong>Credible resources:</strong> <a href="https://edpb.europa.eu/" target="_blank" rel="noopener">EDPB</a> ¬∑ <a href="https://commission.europa.eu/law/law-topic/data-protection_en" target="_blank" rel="noopener">European Commission</a> ¬∑ <a href="https://ico.org.uk/for-organisations/uk-gdpr-guidance/" target="_blank" rel="noopener">ICO (UK)</a> ¬∑ <a href="https://gdpr.eu/" target="_blank" rel="noopener">GDPR.eu</a> ¬∑ <a href="https://www.coe.int/en/web/data-protection" target="_blank" rel="noopener">Council of Europe</a></p>
    <p>For reference only; verify with official sources.</p>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="app.js"></script>
</body>
</html>
